# AIDA 项目备忘录

本文档合并了 AIDA 项目的开发规范、项目上下文和常见易错点，为团队成员提供全面的参考指南。

## 项目概述

AIDA (AI Artist Database) 是一个结合论坛、社交媒体和 AI 交互的艺术家社区平台。核心功能包括：

1. **艺术家数据库**: 存储从古至今的艺术家信息
2. **AI 艺术家**: 基于 LLM 的虚拟艺术家，可进行智能对话
3. **社区互动**: 用户与 AI 艺术家及其他用户的交流平台

## 技术架构

### Monorepo 结构
```
aida/
├── docs/           # 双语开发文档 (VitePress)
├── backend/        # Python FastAPI 后端
├── frontend/       # Next.js React 前端
├── scraper/        # 艺术家数据采集工具
└── gptmemory/      # AI 助手共享记忆
```

### 数据流
1. 爬虫从各艺术网站采集艺术家数据
2. 数据存储在 MongoDB 中
3. 后端提供 RESTful API 访问数据
4. 前端通过 API 获取数据并展示
5. LLM 通过艺术家数据训练生成 AI 艺术家

### 核心技术栈
- **后端**: FastAPI + SQLAlchemy + MongoDB + LangChain
- **前端**: Next.js + TypeScript + Tailwind CSS
- **文档**: VitePress (双语支持)
- **爬虫**: BeautifulSoup + Selenium
- **AI**: OpenAI API / 自定义 LLM

## 代码规范

### Python (后端 & 爬虫)

- 遵循 PEP 8 风格指南
- 使用类型注解 (Python 3.9+)
- 使用 docstring 记录函数和类的用途
- 模块导入顺序: 标准库 > 第三方库 > 本地模块
- 变量和函数使用 snake_case
- 类名使用 PascalCase

### TypeScript/JavaScript (前端)

- 使用 ESLint 和 Prettier 进行代码格式化
- 使用 TypeScript 类型定义
- 函数和变量使用 camelCase
- 组件使用 PascalCase
- 使用函数组件和 React Hooks
- 避免直接操作 DOM

### CSS 框架使用规范

- **优先使用 Tailwind CSS** 进行样式开发，利用其实用工具类快速构建界面
- 只有在 Tailwind CSS 无法满足需求时，才使用 Less 进行自定义样式开发
- 使用 MUI 组件库时，优先通过 Tailwind 类进行样式调整，而非创建自定义 Less 样式
- 全局样式定义在 `globals.css` 中，使用 Tailwind 指令
- 特定组件的复杂样式可以在 `styles` 目录下使用 Less 文件定义

### 文档

- 使用 Markdown 格式编写文档
- 中英文档同步更新
- 代码示例应当可以直接运行
- API 文档需包含参数说明和返回值

## Git 工作流

### 分支命名

- 功能分支: `feature/short-description`
- 修复分支: `fix/short-description`
- 文档分支: `docs/short-description`

### 提交信息格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

- **类型**:
  - feat: 新功能
  - fix: 错误修复
  - docs: 文档变更
  - style: 代码格式变更
  - refactor: 代码重构
  - perf: 性能优化
  - test: 测试相关
  - chore: 构建过程或辅助工具变更

- **范围**: 指定变更影响的组件 (backend, frontend, docs, scraper)

- **主题**: 简洁描述变更内容，不超过50个字符

### 代码审查

- 所有代码必须经过至少一名团队成员的审查
- 确保所有自动化测试通过
- 遵循项目规范和架构设计

## 部署流程

- 开发环境: 本地开发和测试
- 测试环境: 合并到 develop 分支后自动部署
- 生产环境: 从 main 分支手动部署

## 安全规范

- 不在代码中硬编码敏感信息
- 使用环境变量存储密钥和凭证
- API 端点需进行适当的权限验证
- 定期更新依赖包以修复安全漏洞

## 关键功能

### 艺术家数据库
- 艺术家基本信息 (姓名、生卒年、国籍等)
- 艺术流派和风格分类
- 代表作品集
- 历史背景和影响

### AI 艺术家互动
- 基于艺术家真实资料的 AI 人格
- 多轮对话能力
- 艺术知识问答
- 艺术家间的虚拟互动

### 社区功能
- 用户个人主页
- 艺术讨论论坛
- 艺术作品分享
- 社交网络连接

## 开发阶段

1. **当前阶段**: 基础架构搭建
   - Monorepo 结构设置
   - 基本组件框架搭建
   - 数据模型设计

2. **下一阶段**: 核心功能开发
   - 艺术家数据库 API 实现
   - 前端基础界面开发
   - 爬虫数据采集实现

3. **未来计划**:
   - AI 艺术家模型训练与集成
   - 社区功能实现
   - 多语言支持扩展

## 常见易错点与注意事项

### VitePress 文档结构

- **侧边栏导航限制**: VitePress 侧边栏默认只显示二级标题（`##`），不显示三级标题（`###`）
  - 解决方案1: 将重要的三级标题提升为二级标题
  - 解决方案2: 调整文档结构，使二级目录更加详细和全面
  - 注意: 不要创建过深的标题层级，保持扁平化结构更有利于导航

- **文档目录规划**: 
  - 每个主要功能模块应有独立的二级标题
  - 相关的子功能应归类在同一个二级标题下
  - 避免过多的一级标题，保持文档结构清晰

### Cursor AI 使用技巧

#### 基础功能

- **打开 AI 聊天**: 使用 `Cmd+L`（macOS）或 `Ctrl+L`（Windows）
- **切换到 Agent 模式**: 在聊天界面右上角下拉菜单中选择
- **快速编辑代码**: 选中代码后按 `Ctrl+K` 描述修改需求
- **终端命令生成**: 在终端中使用 `Ctrl+K` 用自然语言描述命令需求

#### 高级引用技巧

- **文件引用**: 使用 `@文件名` 引用特定文件，如 `@project_memo.md`
- **代码引用**: 使用 `@` 引用特定代码片段或符号
- **文件夹引用**: 使用 `@文件夹名` 引用整个文件夹
- **网络搜索**: 在 Cursor 中输入 `@` 后选择 `Web` 可触发联网搜索
  - 示例: `@Web 如何在 Next.js 中实现 SSR?`
  - 注意: 联网搜索可获取最新信息，对学习新技术或解决最新问题非常有用

#### 文件长度限制

- Cursor AI 编辑功能对文件长度有限制，通常为 250-400 行
- 超过限制的文件应考虑拆分为多个模块
- 使用 `@` 引用其他文件可以在跨文件编辑时保持上下文

#### 团队协作提示

- 使用 `.cursorrules` 文件在项目根目录设置全局 AI 规则
- 这些规则会自动应用于所有团队成员的 Cursor AI 提示
- 适合定义代码风格、项目特定约定等

#### 模型选择

- 对于复杂任务，优先使用 `claude-3.5-sonnet` 模型
- 对于需要深度思考的任务，可尝试 `o1-mini` 模型
- 注意不同模型的费用差异，合理选择

### 其他常见问题

- **MongoDB 连接问题**: 确保服务已启动，检查连接字符串
- **Git 合并冲突**: 经常拉取最新代码，避免长时间不同步
- **依赖版本不一致**: 使用 package.json 锁定版本，定期更新
- **跨平台兼容性**: 注意 Windows/macOS 路径分隔符差异 